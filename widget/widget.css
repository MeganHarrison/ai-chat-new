:host { all: initial; }
*, *::before, *::after { box-sizing: border-box; }

#ns-root { position: fixed; bottom: 20px; right: 20px; z-index: 2147483000; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; }

#ns-bubble { width: 56px; height: 56px; border-radius: 50%; border: 0; background: #0ee37d; color: #0b0d10; box-shadow: 0 8px 20px rgba(14,227,125,0.45); cursor: pointer; display:flex; align-items:center; justify-content:center; font-size: 22px; font-weight:900; transition: transform 120ms ease, box-shadow 120ms ease; }
#ns-bubble:hover { transform: translateY(-1px); box-shadow: 0 10px 26px rgba(14,227,125,0.55); }
#ns-bubble[hidden] { display:none; }
[bubble-hidden] #ns-bubble { opacity: 0; pointer-events: none; }

#ns-window { position: fixed; bottom: 88px; right: 20px; width: min(380px, calc(100vw - 24px)); height: min(70vh, 640px); background: #0f1217; color: #eef2f7; border: 1px solid rgba(255,255,255,0.06); border-radius: 14px; box-shadow: 0 14px 44px rgba(0,0,0,0.45); display: grid; grid-template-rows: auto 1fr auto auto; overflow: hidden; }

#ns-header { display:flex; align-items:center; justify-content: space-between; gap: 12px; padding: 10px 12px; background: #0b0d10; border-bottom: 1px solid rgba(255,255,255,0.06); }
#ns-header [part=brand]{ display:flex; align-items:center; gap: 8px; }
#ns-header [part=logo]{ filter: saturate(0) brightness(1.4); }
#ns-header [part=title]{ font-size: 14px; letter-spacing: 0.4px; }
#ns-close{ background: transparent; color:#a7b2c2; border:0; font-size:20px; cursor:pointer; }

#ns-transcript { padding: 10px 12px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; scroll-behavior: smooth; }
.ns-bubble { max-width: 85%; padding: 10px 12px; border-radius: 12px; line-height: 1.3; font-size: 14px; white-space: pre-wrap; word-break: break-word; }
.ns-bubble.assistant { background: #141924; color: #eef2f7; border: 1px solid rgba(255,255,255,0.06); align-self: flex-start; }
.ns-bubble.user { background: #0ee37d; color: #0b0d10; align-self: flex-end; }
.ns-system { font-size: 12px; color: #9aa7b8; text-align: center; padding: 4px 0; }

#ns-quick { padding: 6px 8px; border-top: 1px solid rgba(255,255,255,0.06); display:flex; gap:8px; overflow-x:auto; background:#0f1217; }
.ns-chip { background:#141924; color:#eef2f7; border:1px solid rgba(255,255,255,0.08); padding:8px 10px; border-radius:999px; cursor:pointer; white-space:nowrap; font-size:12px; }
.ns-chip:hover{ background:#172034; }

#ns-composer { display:flex; gap:8px; padding:8px; background:#0b0d10; border-top: 1px solid rgba(255,255,255,0.06); }
#ns-input { flex:1; min-height: 36px; max-height: 120px; resize: none; border-radius: 10px; border:1px solid rgba(255,255,255,0.08); padding:8px 10px; background:#0f1217; color:#eef2f7; }
#ns-send { background:#0ee37d; color:#0b0d10; border:0; border-radius:10px; padding:0 14px; font-weight:800; cursor:pointer; }

/* Carousel */
.ns-carousel { display:flex; gap:10px; overflow-x:auto; padding:4px 2px; }
.ns-card { min-width: 220px; background:#101522; border:1px solid rgba(255,255,255,0.06); border-radius:12px; padding:8px; color:#eef2f7; }
.ns-card img { width: 100%; height: 120px; object-fit: cover; border-radius: 10px; background:#0b0d10; }
.ns-card h4 { margin:8px 0 2px; font-size:14px; }
.ns-card p { margin:4px 0; font-size:12px; color:#b9c4d2; }
.ns-card .ns-cta { display:block; width:100%; margin-top:6px; background:#0ee37d; color:#0b0d10; border:0; padding:8px; border-radius:8px; font-weight:800; cursor:pointer; }

/* Mobile safe-area tweak */
@media (max-width: 480px){
  #ns-window { right: 12px; bottom: 76px; width: calc(100vw - 16px); height: min(80vh, 680px); }
  #ns-root { right: 12px; bottom: 12px; }
}
